= Archlinux installation

== System installation

-   Partition and mount:

----
    wifi-menu
    timedatectl set-ntp true
    fdisk /dev/sda
        g
        n +512M     # for /efi
        n +8192M    # for swap
        n +remain   # for /
        t 1 1       # for EFI System
        t 2 19      # for Linux swap
        t 3 20      # for Linux filesystem
        w           # write

    mkfs.fat -F32 /dev/sda1
    mkswap /dev/sda2
    swapon /dev/sda2
    mkfs.ext4 /dev/sda3

    mount /dev/sda3 /mnt
    mkdir /mnt/efi
    mount /dev/sda1 /mnt/efi

    pacstrap /mnt base base-devel vim

    genfstab -U /mnt >> /mnt/etc/fstab

    arch-chroot /mnt
----


-   Datetime:

----
    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
    hwclock --systohc
----


-   Locale:

----
    vim /etc/locale.gen
        uncomment en_US.UTF-8 UTF-8
    local-gen
    vim /etc/locale.conf
        LANG=en_UF.UTF-8
----


-   Hostname:

----
    vim /etc/hostname
        peace
----


-   Network:

----
    pacman -S networkmanager
    systemctl enable NetworkManager
----


-   Create user:

----
    useradd -m -g wheel an9wer
    passwd an9wer
    visudo
        uncomment %wheel ALL=(ALL) NOPASSWD: ALL
        useradd -m -g wheel an9wer
        passwd an9wer
----


-   Bootloader:

----
    pacman -S grub efibootmgr
    grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=archlinux
    grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=archlinux --removable
    grub-mkconfig -o /boot/grub/grub.cfg
----


-   Exit and reboot:

----
    exit
    umount -R /mnt

    reboot
----

== Tools installation

-   Update system:

----
    sudo pacman -Syu
----


-   Install xorg:

----
    sudo pacman -S xorg xorg-xinit
        xorg, which contains xorg-server, is needed by dwm and i3.
----


-   Install suckless tools:

----
    sudo pacman -S libx11 libxft libxinerama

    git clone https://git.suckless.org/dwm
    make && sudo make install

    git clone https://git.suckless.org/st
    make && sudo make install
----


-   Install fonts:

----
    sudo pacman -S adobe-source-code-pro-fonts ttf-ubuntu-font-family
        for terminal
    sudo pacman -S noto-fonts noto-fonts-cjk
        for firefox
----


-   Install virtual console font:

----
    sudo pacman -S tamsyn-font terminus-font
----


-   Install firefox:

----
    sudo pacman -S firefox flashplugin
        Preferences->General->Fonts:
            Serif: Noto Serif
            Sans-serif: Noto Sans
            Monospace: Noto Sans Mono
----


-   Install basic tools:

----
    sudo pacman -S openssh
    sudo pacman -S bash-completion
    sudo pacman -S shadowsocks-qt5

    sudo pacman -S xdg-user-dirs
        xdg-user-dirs-update
----


-   Install alsa:

----
    sudo pacman -S alsa-utils
        amixer sset Master unmute
----

-   Install dunst:

----
    sudo pacman -S dunst libnotify
----


-   Install fcitx:

----
    sudo pacman -S fcitx fcitx-im fcitx-configtool
        run 'fcitx-configtool'
----

-   Install mupdf:

----
    sudo pacman -S mupdf-gl
----

-   Install imagemagick:

----
    sudo pacman -S imagemagick
----
